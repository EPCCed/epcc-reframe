##################################################################################
#                             Variable to change                                 #
##################################################################################

variable        TEMPERATURE equal    300.0  # Temperature in K
variable        PRESSURE    equal     10.0  # Pressure in atm
variable        TIMESTEP    equal      1.0  # dt in fs
variable        NEIGH_TIME  equal      5    # neigh_modify every x dt
variable        NEIGH_DELAY equal     25    # neigh_modify delay
variable        EQUIL_TIME  equal   10    # equilibrate system for # timesteps in NVT
variable        PROD_TIME   equal  1000    # run simulation for # timesteps in total
variable        OUT_TIME    equal   10    # dt between thermo output
variable        X_LENGTH    equal     32    # length of x side of the box
variable        Y_LENGTH    equal     32    # length of y side of the box
variable        Z_LENGTH    equal     32    # length of z side of the box

##################################################################################
#                                 Code                                           #
##################################################################################

units           real
atom_style      full
dimension       3
boundary        p p p

lattice         sc 6.000

######################################################
# Coefficients for bonds, angles, diheadrals & pairs #
######################################################

pair_style      lj/cut/coul/long 12.0
bond_style      harmonic
angle_style     harmonic
dihedral_style  opls
kspace_style    pppm      0.0001



read_data ethanol_${X_LENGTH}x${Y_LENGTH}x${Z_LENGTH}.data

#####################################################
# Neighbour list: distance = LJ cutoff + 2.0 = 14.0 #
#####################################################
neighbor        2.0 bin

###############################
# List renewed every timestep #
###############################
neigh_modify    delay ${NEIGH_DELAY} every ${NEIGH_TIME} check yes

##############################
# Nose-Hoover thermobarostat #
##############################

velocity        all create ${TEMPERATURE} 4928459 rot yes dist gaussian
fix             1 all nvt temp ${TEMPERATURE} ${TEMPERATURE} 20.0

#########################################
# Rebalance number of particles per CPU #
# Can speed up on muliple cores         #
#########################################
#fix                    bal all balance 1000 1.05 shift xy 10 1.05

thermo_style    custom step cpu temp etotal epair elong evdwl vol lx press
thermo          ${OUT_TIME}

timestep        ${TIMESTEP}

run             ${EQUIL_TIME}

run             ${PROD_TIME}
